{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useInputFormat, useInputFormatter, useRangeChecker } from \"./dateUtils\";\nimport * as React from 'react';\nimport { getTranslation } from 'react-native-paper-dates';\nexport default function useDateInput(_ref) {\n  var locale = _ref.locale,\n      value = _ref.value,\n      validRange = _ref.validRange,\n      inputMode = _ref.inputMode,\n      onChange = _ref.onChange;\n\n  var _useRangeChecker = useRangeChecker(validRange),\n      isDisabled = _useRangeChecker.isDisabled,\n      isWithinValidRange = _useRangeChecker.isWithinValidRange,\n      validStart = _useRangeChecker.validStart,\n      validEnd = _useRangeChecker.validEnd;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      error = _React$useState2[0],\n      setError = _React$useState2[1];\n\n  var formatter = useInputFormatter({\n    locale: locale\n  });\n  var inputFormat = useInputFormat({\n    formatter: formatter,\n    locale: locale\n  });\n  var formattedValue = formatter.format(value);\n\n  var onChangeText = function onChangeText(date) {\n    var dayIndex = inputFormat.indexOf('DD');\n    var monthIndex = inputFormat.indexOf('MM');\n    var yearIndex = locale === 'pt' ? inputFormat.indexOf('AAAA') : inputFormat.indexOf('YYYY');\n    var day = Number(date.slice(dayIndex, dayIndex + 2));\n    var year = Number(date.slice(yearIndex, yearIndex + 4));\n    var month = Number(date.slice(monthIndex, monthIndex + 2));\n\n    if (Number.isNaN(day) || Number.isNaN(year) || Number.isNaN(month)) {\n      setError(getTranslation(locale, 'notAccordingToDateFormat', function () {\n        return 'notAccordingToDateFormat';\n      })(inputFormat));\n      return;\n    }\n\n    var finalDate = inputMode === 'end' ? new Date(year, month - 1, day, 23, 59, 59) : new Date(year, month - 1, day);\n\n    if (isDisabled(finalDate)) {\n      setError(getTranslation(locale, 'dateIsDisabled'));\n      return;\n    }\n\n    if (!isWithinValidRange(finalDate)) {\n      var errors = validStart && validEnd ? [\"\" + getTranslation(locale, 'mustBeBetween', function () {\n        return 'mustBeBetween';\n      })(formatter.format(validStart), formatter.format(validEnd))] : [validStart ? getTranslation(locale, 'mustBeHigherThan', function () {\n        return 'mustBeHigherThan';\n      })(formatter.format(validStart)) : '', validEnd ? getTranslation(locale, 'mustBeLowerThan', function () {\n        return 'mustBeLowerThan';\n      })(formatter.format(validEnd)) : ''];\n      setError(errors.filter(function (n) {\n        return n;\n      }).join(' '));\n      return;\n    }\n\n    setError(null);\n\n    if (inputMode === 'end') {\n      onChange(finalDate);\n    } else {\n      onChange(finalDate);\n    }\n  };\n\n  return {\n    onChange: onChange,\n    error: error,\n    formattedValue: formattedValue,\n    onChangeText: onChangeText,\n    inputFormat: inputFormat\n  };\n}","map":{"version":3,"sources":["inputUtils.ts"],"names":["onChange","validEnd","useRangeChecker","React","formatter","useInputFormatter","locale","inputFormat","useInputFormat","formattedValue","onChangeText","date","dayIndex","monthIndex","yearIndex","day","Number","year","month","setError","getTranslation","finalDate","inputMode","isDisabled","isWithinValidRange","errors","validStart","n","error"],"mappings":"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","sourcesContent":["import { useInputFormat, useInputFormatter, useRangeChecker } from './dateUtils'\nimport * as React from 'react'\nimport type { ValidRangeType } from './Calendar'\nimport { getTranslation } from 'react-native-paper-dates'\n\nexport default function useDateInput({\n  locale,\n  value,\n  validRange,\n  inputMode,\n  onChange,\n}: {\n  onChange: (d: Date) => void\n  locale: undefined | string\n  value: Date | undefined\n  validRange: ValidRangeType | undefined\n  inputMode: 'start' | 'end'\n}) {\n  const { isDisabled, isWithinValidRange, validStart, validEnd } =\n    useRangeChecker(validRange)\n  const [error, setError] = React.useState<null | string>(null)\n  const formatter = useInputFormatter({ locale })\n  const inputFormat = useInputFormat({ formatter, locale })\n  const formattedValue = formatter.format(value)\n  const onChangeText = (date: string) => {\n    const dayIndex = inputFormat.indexOf('DD')\n    const monthIndex = inputFormat.indexOf('MM')\n    const yearIndex =\n      locale === 'pt'\n        ? inputFormat.indexOf('AAAA')\n        : inputFormat.indexOf('YYYY')\n\n    const day = Number(date.slice(dayIndex, dayIndex + 2))\n    const year = Number(date.slice(yearIndex, yearIndex + 4))\n    const month = Number(date.slice(monthIndex, monthIndex + 2))\n\n    if (Number.isNaN(day) || Number.isNaN(year) || Number.isNaN(month)) {\n      setError(\n        getTranslation(\n          locale,\n          'notAccordingToDateFormat',\n          () => 'notAccordingToDateFormat'\n        )(inputFormat)\n      )\n      return\n    }\n\n    const finalDate =\n      inputMode === 'end'\n        ? new Date(year, month - 1, day, 23, 59, 59)\n        : new Date(year, month - 1, day)\n\n    if (isDisabled(finalDate)) {\n      setError(getTranslation(locale, 'dateIsDisabled'))\n      return\n    }\n    if (!isWithinValidRange(finalDate)) {\n      let errors =\n        validStart && validEnd\n          ? [\n              `${getTranslation(\n                locale,\n                'mustBeBetween',\n                () => 'mustBeBetween'\n              )(formatter.format(validStart), formatter.format(validEnd))}`,\n            ]\n          : [\n              validStart\n                ? getTranslation(\n                    locale,\n                    'mustBeHigherThan',\n                    () => 'mustBeHigherThan'\n                  )(formatter.format(validStart))\n                : '',\n              validEnd\n                ? getTranslation(\n                    locale,\n                    'mustBeLowerThan',\n                    () => 'mustBeLowerThan'\n                  )(formatter.format(validEnd))\n                : '',\n            ]\n      setError(errors.filter((n) => n).join(' '))\n      return\n    }\n\n    setError(null)\n    if (inputMode === 'end') {\n      onChange(finalDate)\n    } else {\n      onChange(finalDate)\n    }\n  }\n  return {\n    onChange,\n    error,\n    formattedValue,\n    onChangeText,\n    inputFormat,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}