{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport DatePickerInput from \"./DatePickerInput\";\n\nfunction CalendarEdit(_ref) {\n  var mode = _ref.mode,\n      state = _ref.state,\n      _ref$label = _ref.label,\n      label = _ref$label === void 0 ? '' : _ref$label,\n      _ref$startLabel = _ref.startLabel,\n      startLabel = _ref$startLabel === void 0 ? 'Start' : _ref$startLabel,\n      _ref$endLabel = _ref.endLabel,\n      endLabel = _ref$endLabel === void 0 ? 'End' : _ref$endLabel,\n      collapsed = _ref.collapsed,\n      _onChange = _ref.onChange,\n      validRange = _ref.validRange,\n      locale = _ref.locale;\n  var dateInput = React.useRef(null);\n  var startInput = React.useRef(null);\n  var endInput = React.useRef(null);\n  React.useEffect(function () {\n    if (collapsed) {\n      Keyboard.dismiss();\n    }\n\n    var inputsToFocus = [dateInput.current, startInput.current].filter(function (n) {\n      return n;\n    });\n    var inputsToBlur = [dateInput.current, startInput.current, endInput.current].filter(function (n) {\n      return n;\n    });\n\n    if (collapsed) {\n      inputsToBlur.forEach(function (ip) {\n        return ip.blur();\n      });\n    } else {\n      inputsToFocus.forEach(function (ip) {\n        return ip.focus();\n      });\n    }\n  }, [mode, startInput, endInput, dateInput, collapsed]);\n  var onSubmitStartInput = React.useCallback(function () {\n    if (endInput.current) {\n      endInput.current.focus();\n    }\n  }, [endInput]);\n  var onSubmitEndInput = React.useCallback(function () {}, []);\n  var onSubmitInput = React.useCallback(function () {}, []);\n  return React.createElement(View, {\n    style: styles.root\n  }, mode === 'single' ? React.createElement(DatePickerInput, {\n    inputMode: \"start\",\n    ref: dateInput,\n    label: label,\n    value: state.date,\n    onChange: function onChange(date) {\n      return _onChange(_objectSpread(_objectSpread({}, state), {}, {\n        date: date\n      }));\n    },\n    onSubmitEditing: onSubmitInput,\n    validRange: validRange,\n    locale: locale,\n    withModal: false,\n    autoComplete: 'off'\n  }) : null, mode === 'range' ? React.createElement(View, {\n    style: styles.inner\n  }, React.createElement(DatePickerInput, {\n    inputMode: \"start\",\n    ref: startInput,\n    label: startLabel,\n    value: state.startDate,\n    onChange: function onChange(startDate) {\n      return _onChange(_objectSpread(_objectSpread({}, state), {}, {\n        startDate: startDate\n      }));\n    },\n    returnKeyType: 'next',\n    onSubmitEditing: onSubmitStartInput,\n    validRange: validRange,\n    locale: locale,\n    withModal: false,\n    autoComplete: 'off'\n  }), React.createElement(View, {\n    style: styles.separator\n  }), React.createElement(DatePickerInput, {\n    inputMode: \"end\",\n    ref: endInput,\n    label: endLabel,\n    value: state.endDate,\n    onChange: function onChange(endDate) {\n      return _onChange(_objectSpread(_objectSpread({}, state), {}, {\n        endDate: endDate\n      }));\n    },\n    onSubmitEditing: onSubmitEndInput,\n    validRange: validRange,\n    locale: locale,\n    withModal: false,\n    autoComplete: \"off\"\n  })) : null);\n}\n\nvar styles = StyleSheet.create({\n  root: {\n    padding: 12\n  },\n  inner: {\n    flexDirection: 'row'\n  },\n  inputContainer: {\n    flex: 1\n  },\n  input: {\n    flex: 1\n  },\n  separator: {\n    width: 12\n  }\n});\nexport default React.memo(CalendarEdit);","map":{"version":3,"sources":["CalendarEdit.tsx"],"names":["label","startLabel","endLabel","locale","dateInput","React","startInput","endInput","Keyboard","inputsToFocus","n","inputsToBlur","ip","onSubmitStartInput","onSubmitEndInput","onSubmitInput","styles","root","state","date","onChange","inner","startDate","separator","endDate","padding","flexDirection","inputContainer","flex","input","width"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport {\n  View,\n  StyleSheet,\n  TextInput as TextInputNative,\n  Keyboard,\n} from 'react-native'\n\nimport type { ModeType, ValidRangeType } from './Calendar'\nimport type { LocalState } from './DatePickerModalContent'\n\nimport DatePickerInput from './DatePickerInput'\n\nfunction CalendarEdit({\n  mode,\n  state,\n  label = '',\n  startLabel = 'Start',\n  endLabel = 'End',\n  collapsed,\n  onChange,\n  validRange,\n  locale,\n}: {\n  mode: ModeType\n  label?: string\n  startLabel?: string\n  endLabel?: string\n  state: LocalState\n  collapsed: boolean\n  onChange: (s: LocalState) => any\n  validRange: ValidRangeType | undefined\n  locale: string\n}) {\n  const dateInput = React.useRef<TextInputNative | null>(null)\n  const startInput = React.useRef<TextInputNative | null>(null)\n  const endInput = React.useRef<TextInputNative | null>(null)\n\n  // when switching views focus, or un-focus text input\n  React.useEffect(() => {\n    // hide open keyboard\n    if (collapsed) {\n      Keyboard.dismiss()\n    }\n\n    const inputsToFocus = [dateInput.current, startInput.current].filter(\n      (n) => n\n    ) as TextInputNative[]\n\n    const inputsToBlur = [\n      dateInput.current,\n      startInput.current,\n      endInput.current,\n    ].filter((n) => n) as TextInputNative[]\n\n    if (collapsed) {\n      inputsToBlur.forEach((ip) => ip.blur())\n    } else {\n      inputsToFocus.forEach((ip) => ip.focus())\n    }\n  }, [mode, startInput, endInput, dateInput, collapsed])\n\n  const onSubmitStartInput = React.useCallback(() => {\n    if (endInput.current) {\n      endInput.current.focus()\n    }\n  }, [endInput])\n\n  const onSubmitEndInput = React.useCallback(() => {\n    // TODO: close modal and persist range\n  }, [])\n\n  const onSubmitInput = React.useCallback(() => {\n    // TODO: close modal and persist range\n  }, [])\n\n  return (\n    <View style={styles.root}>\n      {mode === 'single' ? (\n        <DatePickerInput\n          inputMode=\"start\"\n          ref={dateInput}\n          label={label}\n          value={state.date}\n          onChange={(date) => onChange({ ...state, date })}\n          onSubmitEditing={onSubmitInput}\n          validRange={validRange}\n          locale={locale}\n          withModal={false}\n          autoComplete={'off'}\n        />\n      ) : null}\n      {mode === 'range' ? (\n        <View style={styles.inner}>\n          <DatePickerInput\n            inputMode=\"start\"\n            ref={startInput}\n            label={startLabel}\n            value={state.startDate}\n            onChange={(startDate) => onChange({ ...state, startDate })}\n            returnKeyType={'next'}\n            onSubmitEditing={onSubmitStartInput}\n            validRange={validRange}\n            locale={locale}\n            withModal={false}\n            autoComplete={'off'}\n          />\n          <View style={styles.separator} />\n          <DatePickerInput\n            inputMode=\"end\"\n            ref={endInput}\n            label={endLabel}\n            value={state.endDate}\n            onChange={(endDate) => onChange({ ...state, endDate })}\n            onSubmitEditing={onSubmitEndInput}\n            validRange={validRange}\n            locale={locale}\n            withModal={false}\n            autoComplete=\"off\"\n          />\n        </View>\n      ) : null}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  root: { padding: 12 },\n  inner: { flexDirection: 'row' },\n  inputContainer: { flex: 1 },\n  input: { flex: 1 },\n  separator: { width: 12 },\n})\n\nexport default React.memo(CalendarEdit)\n"]},"metadata":{},"sourceType":"module"}