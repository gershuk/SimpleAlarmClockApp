{"ast":null,"code":"import * as React from 'react';\nimport Color from 'color';\nimport { useTheme } from 'react-native-paper';\nexport var circleSize = 215;\nexport var hourTypes = {\n  am: 'am',\n  pm: 'pm'\n};\nexport function getHourType(hours) {\n  if (hours >= 0 && hours <= 12) {\n    return hourTypes.am;\n  }\n\n  if (hours > 12 && hours <= 24) {\n    return hourTypes.pm;\n  }\n\n  return undefined;\n}\nexport var inputTypes = {\n  keyboard: 'keyboard',\n  picker: 'picker'\n};\nexport var reverseInputTypes = {\n  keyboard: 'picker',\n  picker: 'keyboard'\n};\nexport var inputTypeIcons = {\n  keyboard: 'keyboard-outline',\n  picker: 'clock-outline'\n};\nexport var clockTypes = {\n  minutes: 'minutes',\n  hours: 'hours'\n};\nvar outerHeight = 34;\n\nvar _30 = Math.PI / 6;\n\nvar _12 = Math.PI / 30;\n\nvar _360 = Math.PI * 2;\n\nvar _90 = Math.PI / 2;\n\nexport function snap(angle, step) {\n  var a = angle;\n\n  while (a < 0) {\n    a += _360;\n  }\n\n  var diff = a % step;\n\n  if (diff <= step / 2) {\n    return angle - diff;\n  }\n\n  return angle - diff + step;\n}\nexport function getHourTypeFromOffset(left, top, size) {\n  var w = size / 2;\n  var x = w - left;\n  var y = size / 2 - top;\n  var distance = Math.sqrt(x * x + y * y);\n  var maxPm = w - outerHeight;\n  return distance > maxPm ? hourTypes.am : hourTypes.pm;\n}\nexport function getMinutes(handAngle) {\n  handAngle = snap(handAngle, _12);\n  var minute = parseInt(((handAngle - _90) % _360 / _12).toFixed(), 10);\n\n  while (minute < 0) {\n    minute += 60;\n  }\n\n  while (minute >= 60) {\n    minute -= 60;\n  }\n\n  return minute;\n}\nexport function getHours(handAngle, hourType) {\n  handAngle = snap(handAngle, _30);\n  var hour = parseInt(((handAngle - _90) % _360 / _30).toFixed(), 10);\n  if (hour < 0) hour += 12;\n  if (hour >= 12) hour -= 12;\n\n  if (hourType === hourTypes.am) {\n    if (hour <= 0) {\n      hour += 12;\n    } else if (hour >= 12) {\n      hour -= 12;\n    }\n  }\n\n  if (hourType === hourTypes.pm) {\n    if (hour <= 0) {\n      hour += 12;\n    } else if (hour > 12) {\n      hour -= 12;\n    }\n  }\n\n  return hour;\n}\nexport function getAngle(left, top, size) {\n  var x = size / 2 - left;\n  var y = size / 2 - top;\n  var angle = x ? Math.atan(y / x) : y < 0 ? -_90 : _90;\n\n  if (x < 0) {\n    angle = -angle + 2 * (_90 + angle);\n  }\n\n  return angle;\n}\nexport function useSwitchColors(highlighted) {\n  var theme = useTheme();\n  var backgroundColor = React.useMemo(function () {\n    if (theme.dark) {\n      if (highlighted) {\n        return Color(theme.colors.primary).hex();\n      }\n\n      return theme.colors.backdrop;\n    }\n\n    if (highlighted) {\n      return Color(theme.colors.primary).lighten(1).hex();\n    }\n\n    return theme.colors.surface;\n  }, [highlighted, theme]);\n  var color = React.useMemo(function () {\n    if (highlighted && !theme.dark) {\n      return theme.colors.primary;\n    }\n\n    return theme.colors.placeholder;\n  }, [highlighted, theme]);\n  return {\n    backgroundColor: backgroundColor,\n    color: color\n  };\n}\nexport function useInputColors(highlighted) {\n  var theme = useTheme();\n  var backgroundColor = React.useMemo(function () {\n    if (theme.dark) {\n      if (highlighted) {\n        return Color(theme.colors.primary).hex();\n      }\n\n      return Color(theme.colors.surface).lighten(1.2).hex();\n    }\n\n    if (highlighted) {\n      return Color(theme.colors.primary).lighten(1).hex();\n    }\n\n    return Color(theme.colors.surface).darken(0.1).hex();\n  }, [highlighted, theme]);\n  var color = React.useMemo(function () {\n    if (highlighted && !theme.dark) {\n      return theme.colors.primary;\n    }\n\n    return theme.colors.text;\n  }, [highlighted, theme]);\n  return {\n    backgroundColor: backgroundColor,\n    color: color\n  };\n}\nexport function toHourInputFormat(hours, is24Hour) {\n  if (hours === 24) {\n    return 0;\n  }\n\n  if (is24Hour) {\n    return hours;\n  }\n\n  if (hours > 12) {\n    return hours - 12;\n  }\n\n  return hours;\n}\nexport function toHourOutputFormat(newHours, previousHours, is24Hour) {\n  if (is24Hour) {\n    return newHours;\n  }\n\n  if (previousHours > 12 && newHours < 12) {\n    return newHours + 12;\n  }\n\n  return newHours;\n}","map":{"version":3,"sources":["timeUtils.ts"],"names":["circleSize","hourTypes","am","pm","hours","inputTypes","keyboard","picker","reverseInputTypes","inputTypeIcons","clockTypes","minutes","outerHeight","_30","Math","_12","_360","_90","a","diff","step","angle","w","size","x","y","distance","maxPm","handAngle","snap","minute","parseInt","hour","hourType","theme","useTheme","backgroundColor","Color","color","highlighted","previousHours","newHours"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport Color from 'color'\nimport { useTheme } from 'react-native-paper'\n\n// 250? when bigger?\nexport const circleSize = 215\n\nexport type PossibleHourTypes = 'am' | 'pm'\nexport type HourTypeMap = {\n  [hourType in PossibleHourTypes]: PossibleHourTypes\n}\nexport const hourTypes: HourTypeMap = {\n  am: 'am',\n  pm: 'pm',\n}\n\nexport function getHourType(hours: number): PossibleHourTypes | undefined {\n  if (hours >= 0 && hours <= 12) {\n    return hourTypes.am\n  }\n  if (hours > 12 && hours <= 24) {\n    return hourTypes.pm\n  }\n  return undefined\n}\n\nexport type PossibleInputTypes = 'keyboard' | 'picker'\nexport type InputTypeMap = {\n  [inputType in PossibleInputTypes]: PossibleInputTypes\n}\nexport const inputTypes: InputTypeMap = {\n  keyboard: 'keyboard',\n  picker: 'picker',\n}\n\nexport const reverseInputTypes: InputTypeMap = {\n  keyboard: 'picker',\n  picker: 'keyboard',\n}\ntype InputIconMap = {\n  [inputType in PossibleInputTypes]: string\n}\nexport const inputTypeIcons: InputIconMap = {\n  keyboard: 'keyboard-outline',\n  picker: 'clock-outline',\n}\n\nexport type PossibleClockTypes = 'hours' | 'minutes'\nexport type ClockTypeMap = {\n  [clockType in PossibleClockTypes]: PossibleClockTypes\n}\nexport const clockTypes: ClockTypeMap = {\n  minutes: 'minutes',\n  hours: 'hours',\n}\n\n// Code inspiration and copied from: https://github.com/ShaneGH/analogue-time-picker/blob/master/src/utils/angle.ts\n\nconst outerHeight = 34\nconst _30 = Math.PI / 6\nconst _12 = Math.PI / 30\nconst _360 = Math.PI * 2\nconst _90 = Math.PI / 2\n\n/** Snap an angle to a given step. E.g. if angle = 22° and step = 10°, round down to 20° */\nexport function snap(angle: number, step: number) {\n  let a = angle\n  while (a < 0) a += _360\n  let diff = a % step\n\n  if (diff <= step / 2) {\n    return angle - diff\n  }\n\n  return angle - diff + step\n}\n\n// detect am / pm based on offset\nexport function getHourTypeFromOffset(\n  left: number,\n  top: number,\n  size: number\n): PossibleHourTypes {\n  const w = size / 2\n  const x = w - left\n  const y = size / 2 - top\n\n  const distance = Math.sqrt(x * x + y * y)\n  const maxPm = w - outerHeight\n\n  return distance > maxPm ? hourTypes.am : hourTypes.pm\n}\n\n// Calculate the minute from the hand angle\nexport function getMinutes(handAngle: number) {\n  handAngle = snap(handAngle, _12)\n\n  let minute = parseInt((((handAngle - _90) % _360) / _12).toFixed(), 10)\n  while (minute < 0) minute += 60\n  while (minute >= 60) minute -= 60\n\n  return minute\n}\n\n// Calculate the hour from the hand angle\nexport function getHours(\n  handAngle: number,\n  hourType: PossibleHourTypes | undefined\n) {\n  handAngle = snap(handAngle, _30)\n\n  let hour = parseInt((((handAngle - _90) % _360) / _30).toFixed(), 10)\n  if (hour < 0) hour += 12\n  if (hour >= 12) hour -= 12\n\n  if (hourType === hourTypes.am) {\n    if (hour <= 0) {\n      hour += 12\n    } else if (hour >= 12) {\n      hour -= 12\n    }\n  }\n  if (hourType === hourTypes.pm) {\n    if (hour <= 0) {\n      hour += 12\n    } else if (hour > 12) {\n      hour -= 12\n    }\n  }\n\n  return hour\n}\n\n/** Get the angle of the left/top co-ordinate from the center of the width.height box */\nexport function getAngle(left: number, top: number, size: number) {\n  const x = size / 2 - left\n  const y = size / 2 - top\n\n  // tan O = y / x\n  let angle = x ? Math.atan(y / x) : y < 0 ? -_90 : _90\n  if (x < 0) {\n    // reflect along vertical axis\n    angle = -angle + 2 * (_90 + angle)\n  }\n\n  return angle\n}\n\nexport function useSwitchColors(highlighted: boolean) {\n  const theme = useTheme()\n  const backgroundColor = React.useMemo<string>(() => {\n    if (theme.dark) {\n      if (highlighted) {\n        return Color(theme.colors.primary).hex()\n      }\n      return theme.colors.backdrop\n    }\n\n    if (highlighted) {\n      return Color(theme.colors.primary).lighten(1).hex()\n    }\n    return theme.colors.surface\n  }, [highlighted, theme])\n\n  const color = React.useMemo<string>(() => {\n    if (highlighted && !theme.dark) {\n      return theme.colors.primary\n    }\n    return theme.colors.placeholder\n  }, [highlighted, theme])\n\n  return { backgroundColor, color }\n}\n\nexport function useInputColors(highlighted: boolean) {\n  const theme = useTheme()\n  const backgroundColor = React.useMemo<string>(() => {\n    if (theme.dark) {\n      if (highlighted) {\n        return Color(theme.colors.primary).hex()\n      }\n      return Color(theme.colors.surface).lighten(1.2).hex()\n    }\n\n    if (highlighted) {\n      return Color(theme.colors.primary).lighten(1).hex()\n    }\n    return Color(theme.colors.surface).darken(0.1).hex()\n  }, [highlighted, theme])\n\n  const color = React.useMemo<string>(() => {\n    if (highlighted && !theme.dark) {\n      return theme.colors.primary\n    }\n    return theme.colors.text\n  }, [highlighted, theme])\n\n  return { backgroundColor, color }\n}\n\nexport function toHourInputFormat(hours: number, is24Hour: boolean): number {\n  if (hours === 24) {\n    return 0\n  }\n  if (is24Hour) {\n    return hours\n  }\n  if (hours > 12) {\n    return hours - 12\n  }\n  return hours\n}\n\nexport function toHourOutputFormat(\n  newHours: number,\n  previousHours: number,\n  is24Hour: boolean\n): number {\n  if (is24Hour) {\n    return newHours\n  }\n  if (previousHours > 12 && newHours < 12) {\n    return newHours + 12\n  }\n  return newHours\n}\n"]},"metadata":{},"sourceType":"module"}